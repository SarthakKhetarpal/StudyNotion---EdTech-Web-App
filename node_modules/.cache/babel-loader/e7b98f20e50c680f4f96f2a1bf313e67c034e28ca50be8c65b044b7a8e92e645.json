{"ast":null,"code":"import { toast } from \"react-hot-toast\";\nimport { setLoading, setUser } from \"../../slices/profileSlice\";\nimport { apiConnector } from \"../apiconnector\";\nimport { profileEndpoints } from \"../apis\";\nimport { logout } from \"./authAPI\";\nconst {\n  GET_USER_DETAILS_API,\n  GET_USER_ENROLLED_COURSES_API\n} = profileEndpoints;\nexport function getUserDetails(token, navigate) {\n  return async dispatch => {\n    const toastId = toast.loading(\"Loading...\");\n    dispatch(setLoading(true));\n    try {\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\n        Authorization: `Bearer ${token}`\n      });\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response);\n      if (!response.data.success) {\n        throw new Error(response.data.message);\n      }\n      const userImage = response.data.data.image ? response.data.data.image : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.data.firstName} ${response.data.data.lastName}`;\n      dispatch(setUser({\n        ...response.data.data,\n        image: userImage\n      }));\n    } catch (error) {\n      dispatch(logout(navigate));\n      console.log(\"GET_USER_DETAILS API ERROR............\", error);\n      toast.error(\"Could Not Get User Details\");\n    }\n    toast.dismiss(toastId);\n    dispatch(setLoading(false));\n  };\n}\nexport async function getUserEnrolledCourses(token) {\n  const toastId = toast.loading(\"Loading...\");\n  let result = [];\n  try {\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\n    const response = await apiConnector(\"GET\", GET_USER_ENROLLED_COURSES_API, null, {\n      Authorisation: `Bearer ${token}`\n    });\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\n    // console.log(\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n    //   response\n    // )\n\n    if (!response.data.success) {\n      throw new Error(response.data.message);\n    }\n    result = response.data.data;\n  } catch (error) {\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error);\n    toast.error(\"Could Not Get Enrolled Courses\");\n  }\n  toast.dismiss(toastId);\n  return result;\n}","map":{"version":3,"names":["toast","setLoading","setUser","apiConnector","profileEndpoints","logout","GET_USER_DETAILS_API","GET_USER_ENROLLED_COURSES_API","getUserDetails","token","navigate","dispatch","toastId","loading","response","Authorization","console","log","data","success","Error","message","userImage","image","firstName","lastName","error","dismiss","getUserEnrolledCourses","result","Authorisation"],"sources":["/Users/sarthakkhetarpal/Downloads/StudyNotion/src/services/operations/profileAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\nimport { setLoading, setUser } from \"../../slices/profileSlice\"\nimport { apiConnector } from \"../apiconnector\"\nimport { profileEndpoints } from \"../apis\"\nimport { logout } from \"./authAPI\"\n\nconst { GET_USER_DETAILS_API, GET_USER_ENROLLED_COURSES_API } = profileEndpoints\n\nexport function getUserDetails(token, navigate) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    dispatch(setLoading(true))\n    try {\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\n        Authorization: `Bearer ${token}`,\n      })\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      const userImage = response.data.data.image\n        ? response.data.data.image\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.data.firstName} ${response.data.data.lastName}`\n      dispatch(setUser({ ...response.data.data, image: userImage }))\n    } catch (error) {\n      dispatch(logout(navigate))\n      console.log(\"GET_USER_DETAILS API ERROR............\", error)\n      toast.error(\"Could Not Get User Details\")\n    }\n    toast.dismiss(toastId)\n    dispatch(setLoading(false))\n  }\n}\n\nexport async function getUserEnrolledCourses(token) {\n  const toastId = toast.loading(\"Loading...\")\n  let result = []\n  try {\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\n    const response = await apiConnector(\n      \"GET\",\n      GET_USER_ENROLLED_COURSES_API,\n      null,\n      {\n        Authorisation: `Bearer ${token}`,\n      }\n    )\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\n    // console.log(\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n    //   response\n    // )\n\n    if (!response.data.success) {\n      throw new Error(response.data.message)\n    }\n    result = response.data.data\n  } catch (error) {\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error)\n    toast.error(\"Could Not Get Enrolled Courses\")\n  }\n  toast.dismiss(toastId)\n  return result\n}"],"mappings":"AAAA,SAASA,KAAK,QAAQ,iBAAiB;AAEvC,SAASC,UAAU,EAAEC,OAAO,QAAQ,2BAA2B;AAC/D,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,gBAAgB,QAAQ,SAAS;AAC1C,SAASC,MAAM,QAAQ,WAAW;AAElC,MAAM;EAAEC,oBAAoB;EAAEC;AAA8B,CAAC,GAAGH,gBAAgB;AAEhF,OAAO,SAASI,cAAcA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EAC9C,OAAO,MAAOC,QAAQ,IAAK;IACzB,MAAMC,OAAO,GAAGZ,KAAK,CAACa,OAAO,CAAC,YAAY,CAAC;IAC3CF,QAAQ,CAACV,UAAU,CAAC,IAAI,CAAC,CAAC;IAC1B,IAAI;MACF,MAAMa,QAAQ,GAAG,MAAMX,YAAY,CAAC,KAAK,EAAEG,oBAAoB,EAAE,IAAI,EAAE;QACrES,aAAa,EAAG,UAASN,KAAM;MACjC,CAAC,CAAC;MACFO,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAEH,QAAQ,CAAC;MAElE,IAAI,CAACA,QAAQ,CAACI,IAAI,CAACC,OAAO,EAAE;QAC1B,MAAM,IAAIC,KAAK,CAACN,QAAQ,CAACI,IAAI,CAACG,OAAO,CAAC;MACxC;MACA,MAAMC,SAAS,GAAGR,QAAQ,CAACI,IAAI,CAACA,IAAI,CAACK,KAAK,GACtCT,QAAQ,CAACI,IAAI,CAACA,IAAI,CAACK,KAAK,GACvB,kDAAiDT,QAAQ,CAACI,IAAI,CAACA,IAAI,CAACM,SAAU,IAAGV,QAAQ,CAACI,IAAI,CAACA,IAAI,CAACO,QAAS,EAAC;MACnHd,QAAQ,CAACT,OAAO,CAAC;QAAE,GAAGY,QAAQ,CAACI,IAAI,CAACA,IAAI;QAAEK,KAAK,EAAED;MAAU,CAAC,CAAC,CAAC;IAChE,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdf,QAAQ,CAACN,MAAM,CAACK,QAAQ,CAAC,CAAC;MAC1BM,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAES,KAAK,CAAC;MAC5D1B,KAAK,CAAC0B,KAAK,CAAC,4BAA4B,CAAC;IAC3C;IACA1B,KAAK,CAAC2B,OAAO,CAACf,OAAO,CAAC;IACtBD,QAAQ,CAACV,UAAU,CAAC,KAAK,CAAC,CAAC;EAC7B,CAAC;AACH;AAEA,OAAO,eAAe2B,sBAAsBA,CAACnB,KAAK,EAAE;EAClD,MAAMG,OAAO,GAAGZ,KAAK,CAACa,OAAO,CAAC,YAAY,CAAC;EAC3C,IAAIgB,MAAM,GAAG,EAAE;EACf,IAAI;IACFb,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC;IAC9D,MAAMH,QAAQ,GAAG,MAAMX,YAAY,CACjC,KAAK,EACLI,6BAA6B,EAC7B,IAAI,EACJ;MACEuB,aAAa,EAAG,UAASrB,KAAM;IACjC,CAAC,CACF;IACDO,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAC;IAC7D;IACA;IACA;IACA;;IAEA,IAAI,CAACH,QAAQ,CAACI,IAAI,CAACC,OAAO,EAAE;MAC1B,MAAM,IAAIC,KAAK,CAACN,QAAQ,CAACI,IAAI,CAACG,OAAO,CAAC;IACxC;IACAQ,MAAM,GAAGf,QAAQ,CAACI,IAAI,CAACA,IAAI;EAC7B,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdV,OAAO,CAACC,GAAG,CAAC,qDAAqD,EAAES,KAAK,CAAC;IACzE1B,KAAK,CAAC0B,KAAK,CAAC,gCAAgC,CAAC;EAC/C;EACA1B,KAAK,CAAC2B,OAAO,CAACf,OAAO,CAAC;EACtB,OAAOiB,MAAM;AACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}